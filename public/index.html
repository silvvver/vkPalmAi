<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–•–∏—Ä–æ–º–∞–Ω—Ç-GPT</title>
  <style>
    body {
      font-family: system-ui, Arial, sans-serif;
      margin: 2rem;
      max-width: 60ch;
    }
    pre {
      white-space: pre-wrap;
      border: 1px solid #ccc;
      padding: 1rem;
      margin-top: 1rem;
    }
    form > * {
      display: block;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>
  <h2>üîÆ –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –ª–∞–¥–æ–Ω–∏</h2>

  <form id="form">
    <input type="file" name="handImage" accept="image/*" required>
    
    <label><input type="radio" name="style" value="ted" checked> –¢—ç–¥—É—Å</label>
    <label><input type="radio" name="style" value="professor"> –ü—Ä–æ—Ñ–µ—Å—Å–æ—Ä</label>
    <label><input type="radio" name="style" value="buzova"> –ë—É–∑–æ–≤–∞</label>
    
    <button type="submit">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </form>

  <pre id="out">‚è≥ –ñ–¥—É –∑–∞–≥—Ä—É–∑–∫—É‚Ä¶</pre>

  <script>
    const form = document.getElementById('form');
    const out  = document.getElementById('out');

    form.addEventListener('submit', async e => {
      e.preventDefault();
      out.textContent = '‚è≥ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º‚Ä¶';

      const fd = new FormData(form);

      try {
        const res = await fetch('/analyze', {
          method: 'POST',
          body: fd
        });
        const json = await res.json();
        out.textContent = json.result || '‚ö†Ô∏è –ü—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç';
      } catch (err) {
        out.textContent = '‚ùå –û—à–∏–±–∫–∞: ' + err.message;
      }
    });
  </script>
</body>
</html>


