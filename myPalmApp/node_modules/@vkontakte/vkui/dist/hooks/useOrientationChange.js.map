{"version":3,"sources":["../../src/hooks/useOrientationChange.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useDOM } from '../lib/dom';\n\nexport type Orientation = 'portrait' | 'landscape';\n\n/**\n * Возвращает текущую ориентация экрана на человеческом языке.\n * Учитывает особенности API на разных платформах.\n */\nfunction getOrientation(window: Window): Orientation {\n  const angle = Math.abs(\n    // eslint-disable-next-line compat/compat\n    window.screen?.orientation?.angle ?? Number(window.orientation),\n  );\n\n  return angle === 90 ? 'landscape' : 'portrait';\n}\n\n/**\n * Возвращает текущую ориентация экрана на человеческом языке.\n * Обновляется при изменении ориентации.\n */\nexport function useOrientationChange(): Orientation {\n  const { window } = useDOM();\n\n  const [orientation, setOrientation] = useState<Orientation>('portrait');\n\n  useEffect(\n    function mount() {\n      /* istanbul ignore if: невозможный кейс (в SSR вызова этой функции не будет) */\n      if (!window) {\n        return;\n      }\n\n      const handleChange = () => {\n        setOrientation(getOrientation(window));\n      };\n\n      handleChange();\n\n      window.addEventListener('orientationchange', handleChange);\n      return function unmount() {\n        window.removeEventListener('orientationchange', handleChange);\n      };\n    },\n    [window],\n  );\n\n  return orientation;\n}\n"],"names":["useEffect","useState","useDOM","getOrientation","window","angle","Math","abs","screen","orientation","Number","useOrientationChange","setOrientation","mount","handleChange","addEventListener","unmount","removeEventListener"],"mappings":"AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,QAAQ;AAC5C,SAASC,MAAM,QAAQ,gBAAa;AAIpC;;;CAGC,GACD,SAASC,eAAeC,MAAc;QAElC,yCAAyC;IACzCA,4BAAAA;QAAAA;IAFF,MAAMC,QAAQC,KAAKC,GAAG,CAEpBH,CAAAA,oCAAAA,iBAAAA,OAAOI,MAAM,cAAbJ,sCAAAA,6BAAAA,eAAeK,WAAW,cAA1BL,iDAAAA,2BAA4BC,KAAK,cAAjCD,8CAAAA,mCAAqCM,OAAON,OAAOK,WAAW;IAGhE,OAAOJ,UAAU,KAAK,cAAc;AACtC;AAEA;;;CAGC,GACD,OAAO,SAASM;IACd,MAAM,EAAEP,MAAM,EAAE,GAAGF;IAEnB,MAAM,CAACO,aAAaG,eAAe,GAAGX,SAAsB;IAE5DD,UACE,SAASa;QACP,6EAA6E,GAC7E,IAAI,CAACT,QAAQ;YACX;QACF;QAEA,MAAMU,eAAe;YACnBF,eAAeT,eAAeC;QAChC;QAEAU;QAEAV,OAAOW,gBAAgB,CAAC,qBAAqBD;QAC7C,OAAO,SAASE;YACdZ,OAAOa,mBAAmB,CAAC,qBAAqBH;QAClD;IACF,GACA;QAACV;KAAO;IAGV,OAAOK;AACT"}