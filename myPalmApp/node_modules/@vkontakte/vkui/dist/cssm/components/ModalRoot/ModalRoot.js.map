{"version":3,"sources":["../../../../src/components/ModalRoot/ModalRoot.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { noop } from '@vkontakte/vkjs';\nimport { warnOnce } from '../../lib/warnOnce';\nimport { AppRootPortal } from '../AppRoot/AppRootPortal';\nimport { ModalOverlay } from '../ModalOverlay/ModalOverlay';\nimport { ModalRootContext, ModalRootOverlayContext } from './ModalRootContext';\nimport type { ModalRootProps } from './types';\n\nconst warn = warnOnce('ModalRoot');\n/**\n * @see https://vkcom.github.io/VKUI/#/ModalRoot\n */\nexport const ModalRoot = ({\n  activeModal,\n  children,\n  modalOverlayTestId,\n  noFocusToDialog,\n  usePortal,\n  onOpen,\n  onOpened,\n  onClose,\n  onClosed,\n}: ModalRootProps): React.ReactNode => {\n  const contextValue = React.useMemo(\n    () => ({\n      isInsideModal: true,\n\n      // base props\n      activeModal,\n      modalOverlayTestId,\n      noFocusToDialog,\n\n      // callbacks\n      onOpen,\n      onOpened,\n      onClose,\n      onClosed,\n\n      // TODO [>=8] Удалить метод\n      updateModalHeight:\n        /* istanbul ignore next: deprecated */\n        process.env.NODE_ENV === 'development'\n          ? () => {\n              warn('Метод updateModalHeight() устарел и будет удалён в VKUI v8');\n            }\n          : noop,\n\n      // TODO [>=8] Удалить метод\n      registerModal:\n        /* istanbul ignore next: deprecated */\n        process.env.NODE_ENV === 'development'\n          ? () => {\n              warn('Метод registerModal() устарел и будет удалён в VKUI v8');\n            }\n          : noop,\n    }),\n    [activeModal, modalOverlayTestId, noFocusToDialog, onClose, onClosed, onOpen, onOpened],\n  );\n  const modalOverlayRef = React.useRef<HTMLDivElement>(null);\n  return (\n    <AppRootPortal usePortal={usePortal}>\n      <ModalRootContext.Provider value={contextValue}>\n        <ModalRootOverlayContext.Provider value={modalOverlayRef}>\n          <ModalOverlay\n            position=\"fixed\"\n            visible={typeof activeModal === 'string'}\n            getRootRef={modalOverlayRef}\n          />\n          {children}\n        </ModalRootOverlayContext.Provider>\n      </ModalRootContext.Provider>\n    </AppRootPortal>\n  );\n};\n"],"names":["React","noop","warnOnce","AppRootPortal","ModalOverlay","ModalRootContext","ModalRootOverlayContext","warn","ModalRoot","activeModal","children","modalOverlayTestId","noFocusToDialog","usePortal","onOpen","onOpened","onClose","onClosed","contextValue","useMemo","isInsideModal","updateModalHeight","process","env","NODE_ENV","registerModal","modalOverlayRef","useRef","Provider","value","position","visible","getRootRef"],"mappings":"AAAA;;AAEA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SAASC,QAAQ,QAAQ,wBAAqB;AAC9C,SAASC,aAAa,QAAQ,8BAA2B;AACzD,SAASC,YAAY,QAAQ,kCAA+B;AAC5D,SAASC,gBAAgB,EAAEC,uBAAuB,QAAQ,wBAAqB;AAG/E,MAAMC,OAAOL,SAAS;AACtB;;CAEC,GACD,OAAO,MAAMM,YAAY,CAAC,EACxBC,WAAW,EACXC,QAAQ,EACRC,kBAAkB,EAClBC,eAAe,EACfC,SAAS,EACTC,MAAM,EACNC,QAAQ,EACRC,OAAO,EACPC,QAAQ,EACO;IACf,MAAMC,eAAelB,MAAMmB,OAAO,CAChC,IAAO,CAAA;YACLC,eAAe;YAEf,aAAa;YACbX;YACAE;YACAC;YAEA,YAAY;YACZE;YACAC;YACAC;YACAC;YAEA,2BAA2B;YAC3BI,mBACE,oCAAoC,GACpCC,QAAQC,GAAG,CAACC,QAAQ,KAAK,gBACrB;gBACEjB,KAAK;YACP,IACAN;YAEN,2BAA2B;YAC3BwB,eACE,oCAAoC,GACpCH,QAAQC,GAAG,CAACC,QAAQ,KAAK,gBACrB;gBACEjB,KAAK;YACP,IACAN;QACR,CAAA,GACA;QAACQ;QAAaE;QAAoBC;QAAiBI;QAASC;QAAUH;QAAQC;KAAS;IAEzF,MAAMW,kBAAkB1B,MAAM2B,MAAM,CAAiB;IACrD,qBACE,KAACxB;QAAcU,WAAWA;kBACxB,cAAA,KAACR,iBAAiBuB,QAAQ;YAACC,OAAOX;sBAChC,cAAA,MAACZ,wBAAwBsB,QAAQ;gBAACC,OAAOH;;kCACvC,KAACtB;wBACC0B,UAAS;wBACTC,SAAS,OAAOtB,gBAAgB;wBAChCuB,YAAYN;;oBAEbhB;;;;;AAKX,EAAE"}