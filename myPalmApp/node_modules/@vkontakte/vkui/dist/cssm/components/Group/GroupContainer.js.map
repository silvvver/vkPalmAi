{"version":3,"sources":["../../../../src/components/Group/GroupContainer.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { useModalContext } from '../../context/ModalContext';\nimport { useAdaptivity } from '../../hooks/useAdaptivity';\nimport type { SizeTypeValues } from '../../lib/adaptivity';\nimport { warnOnce } from '../../lib/warnOnce';\nimport type { HasComponent, HTMLAttributesWithRootRef } from '../../types';\nimport { AppRootContext } from '../AppRoot/AppRootContext';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport styles from './Group.module.css';\n\nconst sizeXClassNames = {\n  none: classNames(styles.sizeXNone, 'vkuiInternalGroup--sizeX-none'),\n  regular: styles.sizeXRegular,\n  compact: styles.sizeXCompact,\n};\n\nconst stylesMode = {\n  none: classNames(styles.modeNone, 'vkuiInternalGroup--mode-none'),\n  plain: classNames(styles.modePlain, 'vkuiInternalGroup--mode-plain'),\n  card: classNames(styles.modeCard, 'vkuiInternalGroup--mode-card'),\n};\n\nconst stylesPadding = {\n  s: styles.paddingS,\n  m: styles.paddingM,\n};\n\ntype GroupMode = 'plain' | 'card' | 'none';\n\n/**\n * Вычисляем mode для Group.\n */\nfunction useGroupMode(\n  forcedMode: GroupContainerProps['mode'],\n  sizeX: SizeTypeValues | 'none',\n  isInsideModal: boolean,\n): GroupMode {\n  const { layout } = React.useContext(AppRootContext);\n\n  if (forcedMode) {\n    return forcedMode;\n  }\n\n  if (isInsideModal) {\n    return 'plain';\n  }\n\n  if (layout) {\n    return layout;\n  }\n\n  if (sizeX !== 'none') {\n    return sizeX === 'regular' ? 'card' : 'plain';\n  }\n\n  return 'none';\n}\n\nexport type GroupContainerProps = HTMLAttributesWithRootRef<HTMLElement> &\n  HasComponent & {\n    /**\n    `show` (только для `mode=\"plain\"`) - разделитель всегда показывается\n    `hide` - разделитель всегда спрятан,\n    `auto` - разделитель рисуется автоматически между соседними группами.\n   */\n    separator?: 'show' | 'hide' | 'auto';\n    /**\n     * Режим отображения. Если установлен `card`, выглядит как карточка c\n     * обводкой и внешними отступами. Если `plain` — без отступов и обводки.\n     * По умолчанию режим отображения зависит от `sizeX` (`mode=card` при `sizeX=REGULAR` и `mode=plain` при `sizeX=COMPACT`)\n     * В модальных окнах по умолчанию `plain`.\n     */\n    mode?: 'plain' | 'card';\n    /**\n     * Отвечает за отступы вокруг контента в режиме `card`.\n     */\n    padding?: 's' | 'm';\n  };\n\nconst warn = warnOnce('Group');\n\nexport const GroupContainer = ({\n  children,\n  separator = 'auto',\n  mode: modeProps,\n  padding = 'm',\n  tabIndex: tabIndexProp,\n  ...restProps\n}: GroupContainerProps) => {\n  const isInsideModal = useModalContext().id !== null;\n  const { sizeX = 'none' } = useAdaptivity();\n\n  const mode = useGroupMode(modeProps, sizeX, isInsideModal);\n\n  const isTabPanel = restProps.role === 'tabpanel';\n\n  if (\n    process.env.NODE_ENV === 'development' &&\n    isTabPanel &&\n    (!restProps['aria-controls'] || !restProps['id'])\n  ) {\n    warn(\n      'При использовании роли \"tabpanel\" необходимо задать значение свойств \"aria-controls\" и \"id\"',\n    );\n  }\n\n  const tabIndex = isTabPanel && tabIndexProp === undefined ? 0 : tabIndexProp;\n\n  let siblingSeparatorElement: React.ReactNode = null;\n  switch (separator) {\n    case 'auto':\n      siblingSeparatorElement = <div className={styles.separatorSibling} />;\n      break;\n    case 'show':\n      siblingSeparatorElement = (\n        <div\n          className={classNames(\n            styles.separatorSibling,\n            mode === 'plain' || mode === 'none' ? styles.separatorSiblingForced : undefined,\n          )}\n        />\n      );\n      break;\n    case 'hide':\n      break;\n  }\n  return (\n    <>\n      <RootComponent\n        Component=\"section\"\n        {...restProps}\n        tabIndex={tabIndex}\n        baseClassName={classNames(\n          'vkuiInternalGroup',\n          styles.host,\n          sizeXClassNames[sizeX],\n          mode === 'plain' && isInsideModal && styles.modePlainInsideModal,\n          stylesMode[mode],\n          stylesPadding[padding],\n        )}\n      >\n        {children}\n      </RootComponent>\n      {siblingSeparatorElement}\n    </>\n  );\n};\n"],"names":["React","classNames","useModalContext","useAdaptivity","warnOnce","AppRootContext","RootComponent","styles","sizeXClassNames","none","sizeXNone","regular","sizeXRegular","compact","sizeXCompact","stylesMode","modeNone","plain","modePlain","card","modeCard","stylesPadding","s","paddingS","m","paddingM","useGroupMode","forcedMode","sizeX","isInsideModal","layout","useContext","warn","GroupContainer","children","separator","mode","modeProps","padding","tabIndex","tabIndexProp","restProps","id","isTabPanel","role","process","env","NODE_ENV","undefined","siblingSeparatorElement","div","className","separatorSibling","separatorSiblingForced","Component","baseClassName","host","modePlainInsideModal"],"mappings":"AAAA;;AAEA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,eAAe,QAAQ,gCAA6B;AAC7D,SAASC,aAAa,QAAQ,+BAA4B;AAE1D,SAASC,QAAQ,QAAQ,wBAAqB;AAE9C,SAASC,cAAc,QAAQ,+BAA4B;AAC3D,SAASC,aAAa,QAAQ,oCAAiC;AAC/D,OAAOC,YAAY,qBAAqB;AAExC,MAAMC,kBAAkB;IACtBC,MAAMR,WAAWM,OAAOG,SAAS,EAAE;IACnCC,SAASJ,OAAOK,YAAY;IAC5BC,SAASN,OAAOO,YAAY;AAC9B;AAEA,MAAMC,aAAa;IACjBN,MAAMR,WAAWM,OAAOS,QAAQ,EAAE;IAClCC,OAAOhB,WAAWM,OAAOW,SAAS,EAAE;IACpCC,MAAMlB,WAAWM,OAAOa,QAAQ,EAAE;AACpC;AAEA,MAAMC,gBAAgB;IACpBC,GAAGf,OAAOgB,QAAQ;IAClBC,GAAGjB,OAAOkB,QAAQ;AACpB;AAIA;;CAEC,GACD,SAASC,aACPC,UAAuC,EACvCC,KAA8B,EAC9BC,aAAsB;IAEtB,MAAM,EAAEC,MAAM,EAAE,GAAG9B,MAAM+B,UAAU,CAAC1B;IAEpC,IAAIsB,YAAY;QACd,OAAOA;IACT;IAEA,IAAIE,eAAe;QACjB,OAAO;IACT;IAEA,IAAIC,QAAQ;QACV,OAAOA;IACT;IAEA,IAAIF,UAAU,QAAQ;QACpB,OAAOA,UAAU,YAAY,SAAS;IACxC;IAEA,OAAO;AACT;AAuBA,MAAMI,OAAO5B,SAAS;AAEtB,OAAO,MAAM6B,iBAAiB,CAAC,EAC7BC,QAAQ,EACRC,YAAY,MAAM,EAClBC,MAAMC,SAAS,EACfC,UAAU,GAAG,EACbC,UAAUC,YAAY,EACtB,GAAGC,WACiB;IACpB,MAAMZ,gBAAgB3B,kBAAkBwC,EAAE,KAAK;IAC/C,MAAM,EAAEd,QAAQ,MAAM,EAAE,GAAGzB;IAE3B,MAAMiC,OAAOV,aAAaW,WAAWT,OAAOC;IAE5C,MAAMc,aAAaF,UAAUG,IAAI,KAAK;IAEtC,IACEC,QAAQC,GAAG,CAACC,QAAQ,KAAK,iBACzBJ,cACC,CAAA,CAACF,SAAS,CAAC,gBAAgB,IAAI,CAACA,SAAS,CAAC,KAAK,AAAD,GAC/C;QACAT,KACE;IAEJ;IAEA,MAAMO,WAAWI,cAAcH,iBAAiBQ,YAAY,IAAIR;IAEhE,IAAIS,0BAA2C;IAC/C,OAAQd;QACN,KAAK;YACHc,wCAA0B,KAACC;gBAAIC,WAAW5C,OAAO6C,gBAAgB;;YACjE;QACF,KAAK;YACHH,wCACE,KAACC;gBACCC,WAAWlD,WACTM,OAAO6C,gBAAgB,EACvBhB,SAAS,WAAWA,SAAS,SAAS7B,OAAO8C,sBAAsB,GAAGL;;YAI5E;QACF,KAAK;YACH;IACJ;IACA,qBACE;;0BACE,KAAC1C;gBACCgD,WAAU;gBACT,GAAGb,SAAS;gBACbF,UAAUA;gBACVgB,eAAetD,WACb,qBACAM,OAAOiD,IAAI,EACXhD,eAAe,CAACoB,MAAM,EACtBQ,SAAS,WAAWP,iBAAiBtB,OAAOkD,oBAAoB,EAChE1C,UAAU,CAACqB,KAAK,EAChBf,aAAa,CAACiB,QAAQ;0BAGvBJ;;YAEFe;;;AAGP,EAAE"}