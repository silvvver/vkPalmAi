{"version":3,"sources":["../../../src/components/WriteBarIcon/WriteBarIcon.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport {\n  Icon24Attach,\n  Icon24CheckCircleOutline,\n  Icon24Send,\n  Icon28AddCircleOutline,\n  Icon28AttachOutline,\n  Icon28CheckCircleOutline,\n  Icon28Send,\n  Icon48WritebarDone,\n  Icon48WritebarSend,\n} from '@vkontakte/icons';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { hasAccessibleName } from '../../lib/accessibility';\nimport { COMMON_WARNINGS, warnOnce } from '../../lib/warnOnce';\nimport { AdaptiveIconRenderer } from '../AdaptiveIconRenderer/AdaptiveIconRenderer';\nimport { Counter } from '../Counter/Counter';\nimport { Tappable } from '../Tappable/Tappable';\nimport { VisuallyHidden } from '../VisuallyHidden/VisuallyHidden';\nimport styles from './WriteBarIcon.module.css';\n\nconst predefinedLabel = {\n  attach: 'Прикрепить файл',\n  send: 'Отправить',\n  done: 'Готово',\n};\n\nexport interface WriteBarIconProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  /**\n   * Предустановленные типы кнопок в WriteBar для отрисовки иконки и установки текста кнопки в зависимости от платформы.\n   * Если передать валидное значение для этого свойства, `children` игнорируются, а для `label` по умолчанию используется текст на \"ru_RU\".\n   *\n   * Валидные значения:\n   * - `attach` – иконка прикрепления, текст по умолчанию — \"Прикрепить файл\";\n   * - `send` – иконка отправки, текст по умолчанию — \"Отправить\";\n   * - `done` – иконка отправки в режиме редактирования, текст по умолчанию — \"Готово\".\n   */\n  mode?: 'attach' | 'send' | 'done';\n  /**\n   * Значение счётчика для кнопки. Например, для количества прикреплённых файлов.\n   */\n  count?: number;\n  /**\n   * Текст кнопки. Необходим для ассистивных технологий.\n   */\n  label?: string;\n}\n\nconst warn = warnOnce('WriteBarIcon');\n\n/**\n * @see https://vkcom.github.io/VKUI/#/WriteBarIcon\n */\nexport const WriteBarIcon = ({\n  mode,\n  children,\n  count,\n  label: labelProp,\n  ...restProps\n}: WriteBarIconProps): React.ReactNode => {\n  const platform = usePlatform();\n\n  let predefinedIcons;\n\n  switch (mode) {\n    case 'attach':\n      predefinedIcons = {\n        IconCompact: platform === 'ios' ? Icon28AddCircleOutline : Icon24Attach,\n        IconRegular: platform === 'ios' ? Icon28AddCircleOutline : Icon28AttachOutline,\n      };\n      break;\n\n    case 'send':\n      predefinedIcons = {\n        IconCompact: platform === 'ios' ? Icon48WritebarSend : Icon24Send,\n        IconRegular: platform === 'ios' ? Icon48WritebarSend : Icon28Send,\n      };\n      break;\n\n    case 'done':\n      predefinedIcons = {\n        IconCompact: platform === 'ios' ? Icon48WritebarDone : Icon24CheckCircleOutline,\n        IconRegular: platform === 'ios' ? Icon48WritebarDone : Icon28CheckCircleOutline,\n      };\n      break;\n\n    default:\n      break;\n  }\n\n  const label = labelProp ?? (mode && predefinedLabel[mode]);\n\n  if (process.env.NODE_ENV === 'development') {\n    /* istanbul ignore next: проверка в dev mode, тест на hasAccessibleName() есть в lib/accessibility.test.tsx */\n    const isAccessible = hasAccessibleName({\n      children: [children, label],\n      ...restProps,\n    });\n\n    if (!isAccessible) {\n      warn(COMMON_WARNINGS.a11y['button-name'], 'error');\n    }\n  }\n\n  return (\n    <Tappable\n      Component=\"button\"\n      hasHover={false}\n      activeMode={styles.active}\n      {...restProps}\n      baseClassName={classNames(\n        styles.host,\n        platform === 'ios' && styles.ios,\n        mode === 'send' && styles.modeSend,\n        mode === 'done' && styles.modeDone,\n      )}\n    >\n      <span className={styles.in}>\n        {label && <VisuallyHidden>{label}</VisuallyHidden>}\n        {predefinedIcons ? <AdaptiveIconRenderer {...predefinedIcons} /> : children}\n      </span>\n      {hasReactNode(count) && (\n        <Counter className={styles.counter} size=\"s\">\n          {count}\n        </Counter>\n      )}\n    </Tappable>\n  );\n};\n"],"names":["React","Icon24Attach","Icon24CheckCircleOutline","Icon24Send","Icon28AddCircleOutline","Icon28AttachOutline","Icon28CheckCircleOutline","Icon28Send","Icon48WritebarDone","Icon48WritebarSend","classNames","hasReactNode","usePlatform","hasAccessibleName","COMMON_WARNINGS","warnOnce","AdaptiveIconRenderer","Counter","Tappable","VisuallyHidden","predefinedLabel","attach","send","done","warn","WriteBarIcon","mode","children","count","label","labelProp","restProps","platform","predefinedIcons","IconCompact","IconRegular","process","env","NODE_ENV","isAccessible","a11y","Component","hasHover","activeMode","baseClassName","span","className","size"],"mappings":"AAAA;;;;;AAEA,YAAYA,WAAW,QAAQ;AAC/B,SACEC,YAAY,EACZC,wBAAwB,EACxBC,UAAU,EACVC,sBAAsB,EACtBC,mBAAmB,EACnBC,wBAAwB,EACxBC,UAAU,EACVC,kBAAkB,EAClBC,kBAAkB,QACb,mBAAmB;AAC1B,SAASC,UAAU,EAAEC,YAAY,QAAQ,kBAAkB;AAC3D,SAASC,WAAW,QAAQ,6BAA0B;AACtD,SAASC,iBAAiB,QAAQ,6BAA0B;AAC5D,SAASC,eAAe,EAAEC,QAAQ,QAAQ,wBAAqB;AAC/D,SAASC,oBAAoB,QAAQ,kDAA+C;AACpF,SAASC,OAAO,QAAQ,wBAAqB;AAC7C,SAASC,QAAQ,QAAQ,0BAAuB;AAChD,SAASC,cAAc,QAAQ,sCAAmC;AAGlE,MAAMC,kBAAkB;IACtBC,QAAQ;IACRC,MAAM;IACNC,MAAM;AACR;AAuBA,MAAMC,OAAOT,SAAS;AAEtB;;CAEC,GACD,OAAO,MAAMU,eAAe;QAAC,EAC3BC,IAAI,EACJC,QAAQ,EACRC,KAAK,EACLC,OAAOC,SAAS,EAEE,WADfC;QAJHL;QACAC;QACAC;QACAC;;IAGA,MAAMG,WAAWpB;IAEjB,IAAIqB;IAEJ,OAAQP;QACN,KAAK;YACHO,kBAAkB;gBAChBC,aAAaF,aAAa,QAAQ5B,yBAAyBH;gBAC3DkC,aAAaH,aAAa,QAAQ5B,yBAAyBC;YAC7D;YACA;QAEF,KAAK;YACH4B,kBAAkB;gBAChBC,aAAaF,aAAa,QAAQvB,qBAAqBN;gBACvDgC,aAAaH,aAAa,QAAQvB,qBAAqBF;YACzD;YACA;QAEF,KAAK;YACH0B,kBAAkB;gBAChBC,aAAaF,aAAa,QAAQxB,qBAAqBN;gBACvDiC,aAAaH,aAAa,QAAQxB,qBAAqBF;YACzD;YACA;QAEF;YACE;IACJ;IAEA,MAAMuB,QAAQC,sBAAAA,uBAAAA,YAAcJ,QAAQN,eAAe,CAACM,KAAK;IAEzD,IAAIU,QAAQC,GAAG,CAACC,QAAQ,KAAK,eAAe;QAC1C,4GAA4G,GAC5G,MAAMC,eAAe1B,kBAAkB;YACrCc,UAAU;gBAACA;gBAAUE;aAAM;WACxBE;QAGL,IAAI,CAACQ,cAAc;YACjBf,KAAKV,gBAAgB0B,IAAI,CAAC,cAAc,EAAE;QAC5C;IACF;IAEA,qBACE,MAACtB;QACCuB,WAAU;QACVC,UAAU;QACVC,UAAU;OACNZ;QACJa,eAAelC,qCAEbsB,aAAa,kCACbN,SAAS,wCACTA,SAAS;;0BAGX,MAACmB;gBAAKC,SAAS;;oBACZjB,uBAAS,KAACV;kCAAgBU;;oBAC1BI,gCAAkB,KAACjB,yCAAyBiB,oBAAsBN;;;YAEpEhB,aAAaiB,wBACZ,KAACX;gBAAQ6B,SAAS;gBAAkBC,MAAK;0BACtCnB;;;;AAKX,EAAE"}